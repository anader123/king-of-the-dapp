(this["webpackJsonpking-of-the-dapp"]=this["webpackJsonpking-of-the-dapp"]||[]).push([[0],{225:function(e,t){e.exports={abi:[{constant:!0,inputs:[],name:"King",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"kingRansom",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"becomeKing",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{inputs:[],payable:!0,stateMutability:"payable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_newKing",type:"address"},{indexed:!1,name:"_kingRansom",type:"uint256"}],name:"Coronation",type:"event"}]}},226:function(e,t,n){e.exports=n.p+"static/media/ethlogo.bdc70232.png"},228:function(e,t,n){e.exports=n(555)},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},248:function(e,t){},283:function(e,t){},285:function(e,t){},335:function(e,t){},337:function(e,t){},368:function(e,t){},369:function(e,t){},411:function(e,t){},528:function(e,t,n){},529:function(e,t,n){},555:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(103),i=n.n(c);n(233),n(234),n(235),n(236),n(237);function r(){return o.a.createElement("div",{className:"header-container"},o.a.createElement("h1",{className:"header-title"},"King of the Dapp"))}var l=n(20),s=n(104),u=n.n(s),m=n(225),d=n(54),p=n.n(d),f=n(226),h=n.n(f);n(528);function b(e){var t=e.connectMetaMask;return o.a.createElement("div",{className:"connect-container"},o.a.createElement("p",{className:"mm-message"},"Please make sure that you are connected to the Ropsten Test Network."),o.a.createElement("button",{onClick:t},"Connect MM"),o.a.createElement("a",{className:"mm-download",target:"_blank",rel:"noopener noreferrer",href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn"},o.a.createElement("span",null,"Download MetaMask")))}n(529);var g=n(227),E=n.n(g);function k(e){var t=e.userAccount,n=e.ethBalance,a=e.kingRansom,c=e.kingAddress,i=e.kingMe,r=e.handleInputAmountChange,l=e.kingAmount,s=E.a.createDataURL({seed:c});return o.a.createElement("div",{className:"dashboard-container"},o.a.createElement("div",{className:"user-info-container"},o.a.createElement("p",{className:"user-address"},"Your Address: ",t),o.a.createElement("p",null,"Balance: ",n," ETH")),o.a.createElement("div",{className:"king-info-container"},o.a.createElement("img",{className:"blockie-img",alt:"eth-blockie",src:s}),o.a.createElement("p",{className:"king-name"},"King: ",c),o.a.createElement("p",null,"King's Ransom: ",a," ETH")),o.a.createElement("div",{className:"input-container"},o.a.createElement("input",{className:"input-box",onChange:r,value:l,type:"number"}),o.a.createElement("button",{className:"input-btn",onClick:i},"King Me"),o.a.createElement("p",{className:"input-text"},"*The amount entered must be at least 0.1 ETH more than the current amount.")),o.a.createElement("p",{className:"medium-link"},"Read the tutorial on Medium."))}function v(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),r=Object(l.a)(i,2),s=r[0],d=r[1],f=Object(a.useState)("0"),g=Object(l.a)(f,2),E=g[0],v=g[1],y=Object(a.useState)("0x2800cC9F11E0956B20FE48FcC8b69db310D93f02"),w=Object(l.a)(y,1)[0],O=Object(a.useState)(""),N=Object(l.a)(O,2),j=N[0],M=N[1],x=Object(a.useState)("0"),C=Object(l.a)(x,2),A=C[0],R=C[1],S=Object(a.useState)("0"),T=Object(l.a)(S,2),K=T[0],B=T[1],H=Object(a.useState)({}),I=Object(l.a)(H,2),F=I[0],W=I[1],D=Object(a.useState)({}),_=Object(l.a)(D,2),P=_[0],J=_[1];Object(a.useEffect)((function(){var e=new u.a(u.a.givenProvider||"http://localhost:8545"),t=new e.eth.Contract(m.abi,w);W(t),J(e)}),[w]);var L=function(){F.methods.King().call((function(e,t){e?console.log(e):M(t)})),F.methods.kingRansom().call((function(e,t){if(e)console.log(e);else{var n=+P.utils.fromWei(t);R(n.toFixed(3))}}))},U=function(e){void 0!==e?P.eth.getBalance(e,(function(e,t){if(e)console.log(e);else{var n=+P.utils.fromWei(t);v(n.toFixed(3))}})):c(!1)},V=function(){var e=window.ethereum;e.autoRefreshOnNetworkChange=!1,e.on("accountsChanged",(function(e){d(e[0]),U(e[0])}))},Y=function(){p()({closeOnClickOutside:!1,button:!1,content:o.a.createElement("div",null,o.a.createElement("img",{className:"block-load-img",src:h.a,alt:"block loading"}),o.a.createElement("p",null,"Blockchain magic in progress..."),o.a.createElement("br",null))})};return o.a.createElement("div",null,n?o.a.createElement("div",null,o.a.createElement(k,{handleInputAmountChange:function(e){B(e.target.value.toString())},ethBalance:E,userAccount:s,kingAddress:j,kingAmount:K,kingRansom:A,kingMe:function(){if(+K>=+A+.1){var e=P.utils.toWei(K),t={from:s,to:w,value:e,data:F.methods.becomeKing().encodeABI()};P.eth.sendTransaction(t).then((function(e){p()({icon:"success",title:"Tx Successfully Sent",closeOnClickOutside:!1,content:o.a.createElement("div",null,o.a.createElement("p",null,"Transaction Hash:"),o.a.createElement("p",null,o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ropsten.etherscan.io/tx/".concat(e.transactionHash)},e.transactionHash)))})})).catch((function(e){console.log("err",e)})),B("0"),setTimeout((function(){return Y()}),1e3)}else p()({icon:"error",title:"Incorrect Amount",text:"The amount entered must be at least 0.1 ETH greater than the current King's Ransom."})}})):o.a.createElement("div",null,o.a.createElement(b,{connectMetaMask:function(){var e=window.ethereum;"3"===e.networkVersion?e.enable().then((function(e){c(!0),d(e[0]),L(),V(),U(e[0]),setInterval((function(){L(),U(e[0])}),25e3)})):p()({icon:"error",title:"Network Error",text:"Please switch to the Ropsten Test Network in your MetaMask extension"})}})))}var y=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"App-container"},o.a.createElement(r,null),o.a.createElement(v,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[228,1,2]]]);
//# sourceMappingURL=main.e664a20b.chunk.js.map